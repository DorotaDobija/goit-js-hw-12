{"version":3,"file":"commonHelpers.js","sources":["../src/gallery.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\n\nconst formEl = document.querySelector(\"form\");\nconst gallery = document.querySelector(\".gallery\");\nconst paginationButton = document.querySelector(\".pagination_btn\");\nconst loaderEL = document.querySelector(\".loader\");\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\nlet pageValue;\nlet searchValue;\n\nconst fetchImages = async (value) => {\n    loaderEL.classList.toggle(\"invisible\");\n    await axios.get('https://pixabay.com/api/', {\n        params: {\n            key: \"35719926-181ab604ec6a85b118ffdb3f0\",\n            q: value,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            per_page: 40,\n            page: pageValue,\n        }\n    }).then((images) => {\n        const imagesArr = images.data.hits;\n        const imagesTotal = images.data.totalHits;\n        const imagesFetched = imagesArr.length * pageValue;\n       \n        if (imagesArr.length === 0) {\n            gallery.textContent = \"\";\n            iziToast.error({\n                title: '',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight'\n            });\n        };\n        createListItemToAdd(imagesArr);\n        loaderEL.classList.toggle(\"invisible\");\n        if (imagesFetched >= imagesTotal) {\n            iziToast.info({\n                title: '',\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight'\n            });\n            paginationButton.classList.toggle(\"invisible\");\n        }\n        \n    }).catch(error => console.log(error));\n}\n\nconst createListItemToAdd = (arr) => {\n  \n    const image = arr.map(image => `<li>\n        <div class=\"card\">\n        <a href=\"${image.largeImageURL}\"><img class=\"gallery_img\" width =\"360px\" height=\"200px\" src=\"${image.webformatURL}\" alt=\"${image.tags}\"></a>\n        <div class=\"information_box\">\n        <p class=\"information\"><span class=\"information_header\">Likes:</span>${image.likes}</p>\n        <p class=\"information\"><span class=\"information_header\">Views:</span>${image.views}</p>\n        <p class=\"information\"><span class=\"information_header\">Comments:</span>${image.comments}</p>\n        <p class=\"information\"><span class=\"information_header\">Downloads:</span>${image.downloads}</p></div>\n        </div>\n        </li>`).join('');\n    gallery.insertAdjacentHTML(\"beforeend\", image);\n    paginationButton.classList.toggle(\"invisible\");\n    console.log(pageValue)\n    if (pageValue > 1) {\n        const imageEl = document.querySelector(\".gallery_img\");\n        const rect = imageEl.getBoundingClientRect();\n        window.scrollBy({\n        top: 2*rect.height,\n        behavior: \"smooth\",\n     });\n    }\n\n    lightbox.refresh();\n}\n\nconst clearFunc = (form) => {\n    form.reset();\n}\n    \nconst sendRequest = (event) => {\n    pageValue = 1;\n    gallery.textContent = \"\";\n    searchValue = event.target.elements[0].value;\n    event.preventDefault();\n    fetchImages(searchValue);\n    clearFunc(formEl);\n};\n    \nconst paginationFunc = () => {\n    paginationButton.classList.toggle(\"invisible\");\n    pageValue++;\n    fetchImages(searchValue);\n}\n\nformEl.addEventListener(\"submit\", sendRequest);\npaginationButton.addEventListener(\"click\", paginationFunc);"],"names":["formEl","gallery","paginationButton","loaderEL","lightbox","SimpleLightbox","pageValue","searchValue","fetchImages","value","axios","images","imagesArr","imagesTotal","imagesFetched","iziToast","createListItemToAdd","error","arr","image","rect","clearFunc","form","sendRequest","event","paginationFunc"],"mappings":"kHAMA,MAAMA,EAAS,SAAS,cAAc,MAAM,EACtCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAmB,SAAS,cAAc,iBAAiB,EAC3DC,EAAW,SAAS,cAAc,SAAS,EAE3CC,EAAW,IAAIC,EAAe,YAAY,EAEhD,IAAIC,EACAC,EAEJ,MAAMC,EAAc,MAAOC,GAAU,CACjCN,EAAS,UAAU,OAAO,WAAW,EACrC,MAAMO,EAAM,IAAI,2BAA4B,CACxC,OAAQ,CACJ,IAAK,qCACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMH,CACT,CACT,CAAK,EAAE,KAAMK,GAAW,CAChB,MAAMC,EAAYD,EAAO,KAAK,KACxBE,EAAcF,EAAO,KAAK,UAC1BG,EAAgBF,EAAU,OAASN,EAErCM,EAAU,SAAW,IACrBX,EAAQ,YAAc,GACtBc,EAAS,MAAM,CACX,MAAO,GACP,QAAS,2EACT,SAAU,UAC1B,CAAa,GAELC,EAAoBJ,CAAS,EAC7BT,EAAS,UAAU,OAAO,WAAW,EACjCW,GAAiBD,IACjBE,EAAS,KAAK,CACV,MAAO,GACP,QAAS,6DACT,SAAU,UAC1B,CAAa,EACDb,EAAiB,UAAU,OAAO,WAAW,EAGzD,CAAK,EAAE,MAAMe,GAAS,QAAQ,IAAIA,CAAK,CAAC,CACxC,EAEMD,EAAuBE,GAAQ,CAEjC,MAAMC,EAAQD,EAAI,IAAIC,GAAS;AAAA;AAAA,mBAEhBA,EAAM,aAAa,iEAAiEA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,+EAE9DA,EAAM,KAAK;AAAA,+EACXA,EAAM,KAAK;AAAA,kFACRA,EAAM,QAAQ;AAAA,mFACbA,EAAM,SAAS;AAAA;AAAA,cAEpF,EAAE,KAAK,EAAE,EAInB,GAHAlB,EAAQ,mBAAmB,YAAakB,CAAK,EAC7CjB,EAAiB,UAAU,OAAO,WAAW,EAC7C,QAAQ,IAAII,CAAS,EACjBA,EAAY,EAAG,CAEf,MAAMc,EADU,SAAS,cAAc,cAAc,EAChC,wBACrB,OAAO,SAAS,CAChB,IAAK,EAAEA,EAAK,OACZ,SAAU,QAClB,CAAM,CACD,CAEDhB,EAAS,QAAO,CACpB,EAEMiB,EAAaC,GAAS,CACxBA,EAAK,MAAK,CACd,EAEMC,EAAeC,GAAU,CAC3BlB,EAAY,EACZL,EAAQ,YAAc,GACtBM,EAAciB,EAAM,OAAO,SAAS,CAAC,EAAE,MACvCA,EAAM,eAAc,EACpBhB,EAAYD,CAAW,EACvBc,EAAUrB,CAAM,CACpB,EAEMyB,EAAiB,IAAM,CACzBvB,EAAiB,UAAU,OAAO,WAAW,EAC7CI,IACAE,EAAYD,CAAW,CAC3B,EAEAP,EAAO,iBAAiB,SAAUuB,CAAW,EAC7CrB,EAAiB,iBAAiB,QAASuB,CAAc"}